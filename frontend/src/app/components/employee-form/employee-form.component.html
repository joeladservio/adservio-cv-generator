<div class="container mt-4">
  <h2>{{ isEditMode ? 'Modifier' : 'Nouvel' }} Employé</h2>
  <form [formGroup]="employeeForm" class="mt-4">
    <div class="row">
      <!-- Informations Personnelles -->
      <div class="col-12">
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="firstName" class="form-label">Prénom <span class="text-danger">*</span></label>
            <textarea class="form-control" id="firstName" formControlName="firstName" rows="2"
                   [class.is-invalid]="employeeForm.get('firstName')?.invalid && employeeForm.get('firstName')?.touched"></textarea>
            <div class="invalid-feedback" *ngIf="employeeForm.get('firstName')?.touched">
              {{ getErrorMessage('firstName') }}
            </div>
          </div>
          <div class="col-md-6 mb-3">
            <label for="lastName" class="form-label">Nom <span class="text-danger">*</span></label>
            <textarea class="form-control" id="lastName" formControlName="lastName" rows="2"
                   [class.is-invalid]="employeeForm.get('lastName')?.invalid && employeeForm.get('lastName')?.touched"></textarea>
            <div class="invalid-feedback" *ngIf="employeeForm.get('lastName')?.touched">
              {{ getErrorMessage('lastName') }}
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="email" class="form-label">Email <span class="text-danger">*</span></label>
            <textarea class="form-control" id="email" formControlName="email" rows="2"
                   [class.is-invalid]="employeeForm.get('email')?.invalid && employeeForm.get('email')?.touched"></textarea>
            <div class="invalid-feedback" *ngIf="employeeForm.get('email')?.touched">
              {{ getErrorMessage('email') }}
            </div>
          </div>
          <div class="col-md-6 mb-3">
            <label for="phone" class="form-label">Téléphone <span class="text-danger">*</span></label>
            <textarea class="form-control" id="phone" formControlName="phone" rows="2"
                   [class.is-invalid]="employeeForm.get('phone')?.invalid && employeeForm.get('phone')?.touched"></textarea>
            <div class="invalid-feedback" *ngIf="employeeForm.get('phone')?.touched">
              {{ getErrorMessage('phone') }}
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Informations Professionnelles -->
    <div class="row mt-3">
      <div class="col-md-6 mb-3">
        <label for="position" class="form-label">Poste <span class="text-danger">*</span></label>
        <textarea class="form-control" id="position" formControlName="position" rows="2"
               [class.is-invalid]="employeeForm.get('position')?.invalid && employeeForm.get('position')?.touched"></textarea>
        <div class="invalid-feedback" *ngIf="employeeForm.get('position')?.touched">
          {{ getErrorMessage('position') }}
        </div>
      </div>
      <div class="col-md-6 mb-3">
        <label for="department" class="form-label">Département <span class="text-danger">*</span></label>
        <textarea class="form-control" id="department" formControlName="department" rows="2"
               [class.is-invalid]="employeeForm.get('department')?.invalid && employeeForm.get('department')?.touched"></textarea>
        <div class="invalid-feedback" *ngIf="employeeForm.get('department')?.touched">
          {{ getErrorMessage('department') }}
        </div>
      </div>
    </div>

    <!-- Formation -->
    <div class="mb-3">
      <label for="education" class="form-label">Formation</label>
      <textarea class="form-control" id="education" rows="5" formControlName="education"></textarea>
    </div>

    <!-- Expérience -->
    <div class="mb-3">
      <label for="experience" class="form-label">Expérience</label>
      <textarea class="form-control" id="experience" rows="5" formControlName="experience"></textarea>
    </div>

    <!-- Compétences -->
    <div class="mb-3">
      <label for="skills" class="form-label">Compétences</label>
      <textarea class="form-control" id="skills" rows="5" formControlName="skills"></textarea>
    </div>

    <!-- Langues -->
    <div class="mb-3">
      <label for="languages" class="form-label">Langues</label>
      <textarea class="form-control" id="languages" rows="5" formControlName="languages"></textarea>
    </div>

    <!-- Certifications -->
    <div class="mb-3">
      <label for="certifications" class="form-label">Certifications</label>
      <textarea class="form-control" id="certifications" rows="5" formControlName="certifications"></textarea>
    </div>

    <!-- Boutons d'action -->
    <div class="d-flex justify-content-end gap-2">
      <button type="button" class="btn btn-secondary" routerLink="/employees">
        <i class="bi bi-x-lg"></i> Annuler
      </button>
      <button type="button" class="btn btn-success" [disabled]="!employeeForm.valid" (click)="confirmSubmit()">
        <i class="bi bi-check-lg"></i> {{ isEditMode ? 'Mettre à jour' : 'Créer' }}
      </button>
    </div>
  </form>
</div>

<!-- Modal de confirmation -->
<div class="modal fade show" [class.d-block]="showConfirmModal" tabindex="-1" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">
          <i class="bi bi-question-circle text-primary"></i>
          Confirmation
        </h5>
        <button type="button" class="btn-close" (click)="cancelSubmit()" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>Êtes-vous sûr de vouloir {{ isEditMode ? 'mettre à jour' : 'créer' }} cet employé ?</p>
        <div class="alert alert-info">
          <i class="bi bi-info-circle"></i>
          <strong>Note :</strong> Vous pourrez toujours modifier ces informations plus tard.
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="cancelSubmit()">
          <i class="bi bi-x-lg"></i> Annuler
        </button>
        <button type="button" class="btn btn-success" (click)="onSubmit()">
          <i class="bi bi-check-lg"></i> Confirmer
        </button>
      </div>
    </div>
  </div>
</div>
<div class="modal-backdrop fade show" *ngIf="showConfirmModal"></div> 